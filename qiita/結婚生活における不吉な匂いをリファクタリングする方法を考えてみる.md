[アジャイルを使ってクリスマスまでに彼女を作る方法を考えてみる](https://qiita.com/Let_kdm_free/items/7287325f4a3541e4551e) を踏まえ
[結婚生活は生涯にわたるリファクタリング](https://qiita.com/Let_kdm_free/items/7287325f4a3541e4551e#comment-d37ae4bb02ce78decb91) との声があった。良い指摘だとおもった。
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/93824/4f527e57-dcef-fbff-4948-38ad3f8dfc20.png)

ので、考えてみました。


## 結婚生活における[不吉な匂い](https://qiita.com/NagaokaKenichi/items/22972e6ba698c7f2978a#%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E4%B8%8D%E5%90%89%E3%81%AA%E8%87%AD%E3%81%84%E3%81%A8%E3%81%AF)
それにはまず結婚生活の不吉な匂いを考えなければなりません。

### 不吉な臭いとは
[深刻な問題、リファクタリングの必要が存在することを示す何らかの兆候、雰囲気を、臭いで比喩して表したもの](https://qiita.com/NagaokaKenichi/items/22972e6ba698c7f2978a#%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E4%B8%8D%E5%90%89%E3%81%AA%E8%87%AD%E3%81%84%E3%81%A8%E3%81%AF)。です。

### 各臭いに対する対応
[新装版　リファクタリング](https://www.amazon.co.jp/%E6%96%B0%E8%A3%85%E7%89%88-%E3%83%AA%E3%83%95%E3%82%A1%E3%82%AF%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0-%E6%97%A2%E5%AD%98%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E5%AE%89%E5%85%A8%E3%81%AB%E6%94%B9%E5%96%84%E3%81%99%E3%82%8B-%EF%BC%AD%EF%BD%81%EF%BD%92%EF%BD%94%EF%BD%89%EF%BD%8E%EF%BC%A6%EF%BD%8F%EF%BD%97%EF%BD%8C%EF%BD%85%EF%BD%92-ebook/dp/B01IGW5MG0)　に対応方針が載っているので、気になる人は是非読んでみましょう。

### コードの不吉な臭いとは

1. 重複したコード
2. 長すぎるメソッド
3. 巨大なクラス
4. 長すぎるパラメータリスト
5. 変更の偏り
6. 変更の分散
7. 特性の横恋慕
8. データの群れ
9. 基本データ型への執着
10. Switch文
11. パラレル継承
12. 怠け者クラス
13. 疑わしき一般化
14. 一時的属性
15. メッセージの連鎖
16. 仲介人
17. 不適切な関係
18. クラスのインターフェース不一致
19. 未熟なクラスライブラリ
20. データクラス
21. 相続拒否


## 変数のスコープ

踏まえると、まず [スコープを小さくする](https://qiita.com/alt_yamamoto/items/25eda376e6b947208996#star5%E5%A4%89%E6%95%B0%E3%81%AE%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%97%E3%82%92%E5%B0%8F%E3%81%95%E3%81%8F%E3%81%99%E3%82%8B) ことが重要。
日々のいさかいや喧嘩は対象を絞り、影響度を最小限にすることが大事です。


## 単一ソースの原則

[同じ情報を重複して持たない。](https://qiita.com/alt_yamamoto/items/25eda376e6b947208996#star5%E5%8D%98%E4%B8%80%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AE%E5%8E%9F%E5%89%87) つまり、同じ、つまらないことは何度も言わない。

## 可読性を意識する

[逆に、わかりやすく大事なことは声に出して言いましょう](https://qiita.com/alt_yamamoto/items/25eda376e6b947208996#star5%E9%81%A9%E5%88%87%E3%81%AA%E5%90%8D%E5%89%8D%E3%82%92%E3%81%A4%E3%81%91%E3%82%8B)。感謝の気持ちとか。
ありがとう。ごちそうさま、等々。[気持ちの可読性を意識しましょう。](https://qiita.com/alt_yamamoto/items/25eda376e6b947208996#star5functionobject%E3%81%AE%E5%BD%A2%E3%82%88%E3%82%8Aobjectfunction%E3%81%AE%E5%BD%A2%E3%82%92%E5%A5%BD%E3%82%80) 

## 結婚生活における依存度

不吉な匂いを考えると重要なポイントは、「責務」の切り分け、「関係」の度合いであることがわかります。つまり結婚生活も [疎結合と密結合のバランス](https://qiita.com/alt_yamamoto/items/25eda376e6b947208996#%E7%96%8E%E7%B5%90%E5%90%88%E3%81%A8%E5%AF%86%E7%B5%90%E5%90%88%E3%81%AE%E3%83%90%E3%83%A9%E3%83%B3%E3%82%B9) が重要な要素であることが考えられるのではないでしょうか。

> 一般にプログラムは疎結合である方が汎用性やメンテナンス性に優れるが、
> 結合度を高めすぎると、1つのファイルが肥大しすぎたり密結合により汎用性やメンテナンス性を損なってしまうが、不必要で過剰な疎結合もまたメリットよりコストが大きくなってしまうというデメリットがある。

結婚生活も互いに、適切に、疎であるほうが、汎用性や保守性が維持できる期待があります。何がベストかはケースバイケースで正解のない課題ではあります。適切なバランスでまとめることを意識していきましょう！


## 参考

[良いコードの書き方](https://qiita.com/alt_yamamoto/items/25eda376e6b947208996)
[不吉な匂い](https://qiita.com/NagaokaKenichi/items/22972e6ba698c7f2978a#%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E4%B8%8D%E5%90%89%E3%81%AA%E8%87%AD%E3%81%84%E3%81%A8%E3%81%AF)
